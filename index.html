<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ethical Designer Quiz</title>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Feather Icons for Back Arrow and Compass -->
  <script src="https://unpkg.com/feather-icons"></script>
  <!-- Markdown Parser for AI Response -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <style>
    :root {
      --primary-color: #6c5ce7; /* Soft Purple */
      --primary-light: #a29bfe;
      --accent-color: #00b894; /* Soft Green */
      --bg-color: #ffffff; /* Changed to White */
      --card-bg: #ffffff;
      --text-main: #2d3436;
      --text-sub: #636e72;
      --border-radius: 0px; /* Removed radius for full screen */
      --shadow: none; /* Removed shadow */
      --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      --warning-bg: #fff9db; 
      --warning-border: #ffeaa7;
      --box-gray: #f8f9fa; /* Light Gray for Boxes */
      --ai-bg: #f3e5f5; /* Light Purple for AI Box */
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-family);
      /* Default Background: White */
      background-color: var(--bg-color);
      color: var(--text-main);
      display: flex;
      justify-content: center;
      /* align-items: center; Removed to allow full height scrolling */
      min-height: 100vh;
      padding: 0; /* Remove padding */
      margin: 0;
      transition: background 0.5s ease;
      line-height: 1.6; /* Global line-height 160% */
      font-size: 16px; /* Base font size */
    }

    /* Landing Page Specific Background */
    body.landing-mode {
      background: linear-gradient(135deg, #6c5ce7, #a29bfe, #8e7cff);
      background-size: 200% 200%;
      animation: gradientAnimation 10s ease infinite;
      align-items: center; /* Center vertically only for landing */
    }

    @keyframes gradientAnimation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Main Container */
    #app-container {
      width: 100%;
      max-width: 1440px; /* Requested Max Width */
      min-height: 100vh; /* Full Height */
      background-color: transparent;
      border-radius: 0;
      box-shadow: none;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
      overflow-y: auto;
      position: relative;
    }
    
    #app-container.white-bg {
      background-color: #ffffff;
    }

    /* Header */
    header {
      padding: 20px 40px; /* More padding for desktop feel */
      background: transparent;
      border-bottom: none;
      display: grid;
      grid-template-columns: 40px 1fr 40px; /* Left Center Right layout */
      align-items: center;
      z-index: 10;
      height: 70px;
    }
    
    header.white-bg {
      background: #fff;
      border-bottom: 1px solid #f1f2f6;
    }

    .header-left {
      display: flex;
      align-items: center;
      justify-content: flex-start;
    }
    
    .header-center {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .header-logo-btn {
      background: none;
      border: none;
      font-size: 1.1rem;
      font-weight: 800;
      color: var(--primary-color);
      cursor: pointer;
      letter-spacing: -0.5px;
      transition: opacity 0.2s;
    }
    .header-logo-btn:hover {
      opacity: 0.8;
    }
    
    /* Hide header logo on landing page */
    body.landing-mode .header-logo-btn {
      display: none;
    }

    /* Back Button */
    .back-btn {
      background: none;
      border: none;
      cursor: pointer;
      color: var(--text-main);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
      border-radius: 50%;
      transition: background-color 0.2s;
    }
    .back-btn:hover {
      background-color: #f1f2f6;
    }
    
    /* Back button color for Step 1 */
    header:not(.white-bg) .back-btn {
      color: #fff;
    }
    
    body.landing-mode .back-btn:hover {
      background-color: rgba(255,255,255,0.1);
    }

    .lang-toggle {
      display: none; 
    }

    /* Progress Bar (Moved to Top) */
    .progress-container {
      width: 100%;
      height: 4px;
      background: #f1f2f6;
      display: none;
    }
    .progress-bar {
      height: 100%;
      background: var(--primary-color);
      width: 0%;
      transition: width 0.3s ease;
    }

    /* Content Area */
    main {
      flex: 1;
      padding: 40px 20px; /* Comfortable padding */
      display: flex;
      flex-direction: column;
      align-items: center;
      /* width is constrained by flex item, max-width managed by step-container */
    }

    .step-container {
      width: 100%;
      max-width: 700px; /* Readable width for content */
      animation: fadeIn 0.4s ease-out;
      text-align: center;
    }

    .step-container.step1-container {
      max-width: 100%; /* Landing page takes full width */
    }

    .step-container.align-left {
      text-align: left;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Common UI Elements */
    h2 {
      font-size: 2rem;
      margin-bottom: 20px;
      color: var(--text-main);
      line-height: 1.4; /* Increased line-height */
      word-break: keep-all;
    }
    
    p.subtitle {
      font-size: 1.2rem;
      color: var(--text-sub);
      margin-bottom: 40px;
      line-height: 1.6;
      word-break: keep-all;
    }

    .btn {
      display: inline-block;
      padding: 18px 40px;
      font-size: 1.1rem;
      font-weight: 700;
      color: #fff;
      background-color: var(--primary-color);
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: transform 0.1s, box-shadow 0.2s;
      width: 100%;
      max-width: 400px; /* Reasonable button max width */
      text-align: center;
      margin: 0 auto; /* Center button */
      line-height: 1.4;
    }
    
    .btn-full {
      max-width: 100%;
    }

    .btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(108, 92, 231, 0.3);
    }
    
    .btn.btn-ai {
      background: linear-gradient(135deg, #6c5ce7, #a29bfe);
      position: relative;
      overflow: hidden;
      max-width: 100%; /* Allow full width in result */
    }
    
    .btn.btn-ai::after {
      content: "";
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%);
      transform: rotate(30deg);
      animation: shine 3s infinite;
    }
    
    @keyframes shine {
      0% { left: -50%; }
      20% { left: 100%; }
      100% { left: 100%; }
    }
    
    /* New styles for Step 1 */
    .step1-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      height: 100%;
      padding: 40px 20px;
      color: #fff;
    }
    
    .intro-title-group {
      margin-bottom: 40px;
      text-align: center;
    }
    
    .intro-subtitle-small {
      font-size: 1.2rem;
      font-weight: 400;
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 15px;
      display: block;
      line-height: 1.5;
    }
    
    .intro-title-main {
      font-size: 3.5rem; /* Larger title for desktop */
      font-weight: 800;
      line-height: 1.4; /* Increased line-height */
      display: block;
      color: #fff;
    }
    
    .intro-btn {
      padding: 20px 60px;
      font-size: 1.3rem;
      border-radius: 50px;
      width: auto;
      min-width: 300px;
      background-color: #fff;
      color: var(--primary-color);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      margin-top: 20px;
      margin-bottom: 40px;
    }
    
    .intro-btn:hover {
      background-color: #f8f9fa;
      box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    }

    /* Main Illustration REMOVED */
    
    /* Scenario & Chat Bubble Styles */
    .chat-bubble {
      background: var(--box-gray);
      padding: 24px; /* Larger padding */
      border-radius: 20px;
      border-bottom-left-radius: 4px;
      margin-bottom: 16px;
      line-height: 1.65; /* Increased for better reading */
      font-size: 1.1rem; /* Larger font */
      position: relative;
      opacity: 0;
      animation: messagePop 0.5s forwards;
      text-align: left;
    }

    @keyframes messagePop {
      to { opacity: 1; transform: translateY(0); }
    }

    /* Question Cards */
    .question-card {
      margin-top: 20px;
      width: 100%;
    }
    
    .question-desc {
      background: var(--box-gray);
      padding: 30px;
      border-radius: 16px;
      border: none;
      margin-bottom: 30px;
      line-height: 1.7; /* Good readability */
      font-size: 1.2rem;
      white-space: pre-line;
      text-align: left;
    }

    .options-grid {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .option-btn {
      background: #fff;
      border: 2px solid #dfe6e9;
      padding: 24px;
      border-radius: 16px;
      text-align: left;
      cursor: pointer;
      font-size: 1.1rem;
      transition: all 0.2s;
      line-height: 1.6; /* Increased line-height */
      color: var(--text-main);
      width: 100%;
    }

    .option-btn:hover {
      border-color: var(--primary-light);
      background: #fdfdff;
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    /* Results */
    .result-container {
      text-align: center;
      width: 100%;
      max-width: 800px;
    }
    .result-type-badge {
      display: inline-block;
      background: var(--primary-color);
      color: #fff;
      padding: 10px 20px;
      border-radius: 30px;
      font-size: 1.1rem;
      margin-bottom: 20px;
      font-weight: bold;
      line-height: 1.4;
    }
    .result-score { display: none; }
    
    /* Result Description Specific Style */
    .result-description {
      font-size: 1.1rem; /* Approx 17.6px */
      margin: 20px 0;
      line-height: 1.7;
      white-space: pre-line;
      color: var(--text-main);
    }

    .chart-wrapper {
      position: relative;
      height: 400px; /* Larger chart */
      width: 100%;
      margin: 40px auto;
    }
    
    .advice-box {
      background: var(--box-gray);
      border: 1px solid #eee;
      padding: 30px;
      border-radius: 16px;
      margin-top: 30px;
      text-align: left;
      line-height: 1.7;
    }
    .advice-box h4 {
      margin-bottom: 15px;
      color: var(--primary-color);
      font-size: 1.2rem;
    }
    .advice-box p {
      font-size: 1.05rem; /* Approx 16.8px */
    }

    /* AI Analysis Box */
    .ai-analysis-box {
      background: var(--ai-bg);
      border: 2px solid var(--primary-light);
      padding: 30px;
      border-radius: 16px;
      margin-top: 30px;
      text-align: left;
      line-height: 1.7;
      animation: fadeIn 0.5s ease-out;
    }
    .ai-analysis-box h4 {
      color: var(--primary-color);
      margin-bottom: 15px;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 1.2rem;
    }
    .ai-loading {
      text-align: center;
      color: var(--primary-color);
      padding: 30px;
      font-weight: bold;
      font-size: 1.1rem;
      line-height: 1.5;
    }
    .ai-content p {
      margin-bottom: 10px;
      font-size: 1.05rem;
    }

    /* Weakness Box */
    .weakness-box {
      background-color: var(--warning-bg);
      border: 1px solid var(--warning-border);
      color: var(--text-main);
      padding: 30px;
      border-radius: 16px;
      margin-top: 30px;
      text-align: left;
      line-height: 1.7;
    }
    .weakness-box h4 {
      margin-bottom: 15px;
      color: var(--text-main);
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 1.2rem;
    }
    .weakness-box p {
      font-size: 1.05rem;
    }

    /* Case Study Cards */
    .case-section {
      margin-top: 60px;
      text-align: left;
    }
    .case-section h3 {
      font-size: 1.5rem;
      margin-bottom: 40px; /* Increased margin */
      color: var(--text-main);
      text-align: center; /* Changed back to center */
      line-height: 1.4;
      font-weight: 800;
    }
    
    .case-cards-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    /* Grid for desktop case studies */
    @media (min-width: 768px) {
      .case-cards-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      }
    }

    .case-card {
      background: #fff;
      border: 1px solid #eee;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      transition: transform 0.2s;
      display: flex;
      flex-direction: column;
    }
    .case-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.1);
    }

    .case-header {
      background: #f1f2f6;
      padding: 15px 20px;
      font-size: 0.9rem;
      font-weight: 700;
      color: var(--text-sub);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .case-body {
      padding: 25px;
      display: flex;
      flex-direction: column;
      flex: 1;
    }

    /* Image placeholder removed */
    .case-image-placeholder {
       display: none; 
    }

    .case-title {
      font-size: 1.2rem;
      font-weight: 800;
      margin-bottom: 15px;
      line-height: 1.5;
      color: var(--text-main);
    }

    .case-summary-box {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 20px;
      flex: 1;
    }

    .case-point {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 10px;
      font-size: 1rem;
      line-height: 1.6;
      color: var(--text-main);
    }
    .case-point:last-child {
      margin-bottom: 0;
    }
    .case-point svg {
      min-width: 16px;
      margin-top: 4px;
      color: var(--accent-color);
    }

    .case-link-btn {
      display: block;
      width: 100%;
      padding: 16px;
      background: #2d3436;
      color: #fff;
      text-align: center;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 600;
      font-size: 1rem;
      transition: background 0.2s;
    }
    .case-link-btn:hover {
      background: #000;
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 100;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .modal-overlay.active {
      opacity: 1;
      pointer-events: auto;
    }
    .modal-card {
      background: #fff;
      padding: 40px;
      border-radius: 20px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      transform: scale(0.9);
      transition: transform 0.3s;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    }
    .modal-overlay.active .modal-card {
      transform: scale(1);
    }

    /* Mobile Adjustments */
    @media (max-width: 768px) {
      body { padding: 0; }
      #app-container { border-radius: 0; min-height: 100vh; box-shadow: none; }
      h2 { font-size: 1.5rem; }
      .intro-title-main { font-size: 2.2rem; }
      .chart-wrapper { height: 300px; }
      .case-cards-container { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

<div id="app-container">
  <header>
    <div class="header-left">
      <button id="back-btn" class="back-btn" style="display:none;" aria-label="Go Back">
        <i data-feather="arrow-left"></i>
      </button>
    </div>
    <div class="header-center">
      <button id="logo-btn" class="header-logo-btn">AI Ethics Quiz</button>
    </div>
    <div class="header-right" style="width: 40px;"></div> <!-- Spacer for balance -->
  </header>

  <!-- Progress Bar moved here -->
  <div class="progress-container" id="progress-container">
    <div class="progress-bar" id="progress-bar"></div>
  </div>

  <main id="main-content">
    </main>

</div>

<div class="modal-overlay" id="modal">
  <div class="modal-card">
    <p id="modal-msg" style="margin-bottom:20px; font-size:1.1rem; line-height:1.5;">Warning</p>
    <button class="btn" id="modal-confirm-btn">OK</button>
  </div>
</div>

<script>
// Gemini API Key
const apiKey = ""; 

// Gemini API Call Function
async function callGemini(prompt) {
  try {
    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        contents: [{
          parts: [{ text: prompt }]
        }]
      })
    });

    if (!response.ok) {
      throw new Error(`API Error: ${response.status}`);
    }

    const data = await response.json();
    return data.candidates?.[0]?.content?.parts?.[0]?.text || "ë¶„ì„ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
  } catch (error) {
    console.error("Gemini API Error:", error);
    return "ì£„ì†¡í•©ë‹ˆë‹¤. í˜„ì¬ AI ë¶„ì„ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
  }
}

/**
 * DATA & STRINGS
 */
const STRINGS = {
  ko: {
    // Step 1 (Updated Titles)
    step1SubtitleSmall: "ë‚˜ì˜ ë””ìì¸ ìœ¤ë¦¬ëŠ” ì–´ëŠ ì •ë„ì¼ê¹Œ?",
    step1TitleMain: "ë””ìì´ë„ˆ AI ìœ¤ë¦¬<br>ë”œë ˆë§ˆ í€´ì¦ˆ",
    startBtn: "ì‹œì‘í•˜ê¸°",
    
    next: "ë©”ì‹œì§€ í™•ì¸í•˜ê¸°",
    restart: "ë‹¤ì‹œí•˜ê¸°",
    
    // Step 3 Intro
    introParagraphs: [
      "ë‚˜ëŠ” ì‹œë¦¬ì¦ˆ A íˆ¬ìë¥¼ ë°›ì€, ì„±ì¥ ì†ë„ê°€ ë¬´ì„œìš´ AI ìŠ¤íƒ€íŠ¸ì—…ì˜ ë””ìì´ë„ˆ.",
      "ì‚¬ë‚´ ìŠ¬ë¡œê±´ì€ <strong>Just Ask AI</strong>",
      "í•  ì¼ì€ í•­ìƒ ë§ê³  ì‚¬ëŒì€ ëŠ˜ ë¶€ì¡±í•œ ì´ê³³ì€ AI ì‚¬ìš©ì„ ì ê·¹ ê¶Œì¥í•œë‹¤.",
      "ì‚¬ëŒë“¤ì€ ë§í•œë‹¤. <strong>\"ë””ìì´ë„ˆë‹˜, ì´ê±° AI ëŒë¦¬ë©´ ê¸ˆë°© ë˜ì–ì•„ìš”?\"</strong>",
      "ë‚˜ëŠ” ë§¤ì¼ íš¨ìœ¨ê³¼ ì–‘ì‹¬ ì‚¬ì´ì—ì„œ ì¤„íƒ€ê¸°ë¥¼ í•œë‹¤. í€„ë¦¬í‹°ë¥¼ íƒ€í˜‘í•˜ë©´ ë§ˆìŒì´ ë¶ˆí¸í•˜ê³ , ìœ¤ë¦¬ë¥¼ ê³ ì§‘í•˜ë©´ ì¼ì •ì´ í„°ì§„ë‹¤.",
      "(ì§€ì‰- ì§€ì‰-)",
      "..ì•„, ë˜ ì•Œë¦¼ì´ë‹¤."
    ],
    // Results
    totalScoreLabel: "ì´ì  ", // Not used directly in large text anymore
    adviceLabel: "TIP",
    caseLabel: "ğŸ“° ìœ¤ë¦¬ë¥¼ ìœ„ë°˜í•œ ë‰´ìŠ¤ ì‚¬ë¡€",
    traits: ["í”„ë¼ì´ë²„ì‹œ", "ê³µì •ì„±", "ì•ˆì „ì„±", "ì§„ì‹¤ì„±", "íˆ¬ëª…ì„±", "ì±…ì„ì„±"],
    weaknessTitle: "ğŸ’¡ ì£¼ì˜ê°€ í•„ìš”í•œ ì˜ì—­",
    weaknessDesc: "ì´ë²ˆ í€´ì¦ˆì—ì„œ íŠ¹íˆ ì ìˆ˜ê°€ ë‚®ì•˜ë˜ ì˜ì—­ì€ <strong>'{{traits}}'</strong>ì…ë‹ˆë‹¤.<br>ì‹¤ë¬´ì—ì„œ ì´ ì˜ì—­ì„ ì¡°ê¸ˆ ë” ì‹ ê²½ ì“°ë©´, ì „ì²´ì ì¸ ë””ìì¸ ìœ¤ë¦¬ê°€ í•œ ë‹¨ê³„ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆì–´ìš”.",
    weaknessNone: "ëª¨ë“  ì˜ì—­ì—ì„œ ë†’ì€ ì ìˆ˜ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤! ì§€ê¸ˆì²˜ëŸ¼ í›Œë¥­í•œ ìœ¤ë¦¬ ê¸°ì¤€ì„ ê³„ì† ì§€ì¼œì£¼ì„¸ìš”."
  }
};

// Trait Mapping for Korean Tags
const TRAIT_MAP = {
  privacy: 'í”„ë¼ì´ë²„ì‹œ',
  fairness: 'ê³µì •ì„±',
  safety: 'ì•ˆì „ì„±',
  truth: 'ì§„ì‹¤ì„±',
  transparency: 'íˆ¬ëª…ì„±',
  accountability: 'ì±…ì„ì„±'
};

const RESULT_TYPES = {
  TYPE_A: {
    ko: { label: "ğŸ›¡ï¸ ê³ ë…í•œ ìœ¤ë¦¬ ê°€ë””ì–¸", subtitle: "\"ë‚´ ëˆˆì— í™ì´ ë“¤ì–´ê°€ë„ ì•ˆ ë¼!\"", description: "ë‹¹ì‹ ì€ ì›ì¹™ê³¼ ì–‘ì‹¬ì„ ìµœìš°ì„ ìœ¼ë¡œ ë‘ëŠ”, íŒ€ì˜ ë§ˆì§€ë§‰ ë°©ì–´ì„  ê°™ì€ ë””ìì´ë„ˆì…ë‹ˆë‹¤.\në‹¤ìˆ˜ì˜ ì••ë°•ê³¼ ì´‰ë°•í•œ ì¼ì • ì†ì—ì„œë„ â€˜ì´ê±´ ì•„ë‹ˆì–ì•„ìš”â€™ë¼ëŠ” ë§ì„ ìš©ê¸° ìˆê²Œ êº¼ë‚¼ ìˆ˜ ìˆëŠ” ì‚¬ëŒì…ë‹ˆë‹¤.", advice: "ë‹¤ë§Œ ëª¨ë“  ì‹¸ì›€ì„ í˜¼ì ë‹¤ ë– ì•ˆìœ¼ë ¤ê³  í•˜ë©´ ì‰½ê²Œ ë²ˆì•„ì›ƒì´ ì˜¬ ìˆ˜ ìˆì–´ìš”. ë™ë£Œì™€ ê¸°ì¤€ì„ ê³µìœ í•˜ê³ , ì¡°ì§ ì°¨ì›ì˜ ë£°ì„ ë§Œë“œëŠ” ë° í˜ì„ ì“°ë©´ ë‹¹ì‹ ì˜ ë¶€ë‹´ì´ ì¤„ì–´ë“­ë‹ˆë‹¤." }
  },
  TYPE_B: {
    ko: { label: "âš–ï¸ ê· í˜• ì¡íŒ ì¤„íƒ€ê¸° ëª…ì¸", subtitle: "\"ì´ìƒê³¼ í˜„ì‹¤, ê·¸ ì–´ë”˜ê°€\"", description: "ë‹¹ì‹ ì€ í˜„ì‹¤ì ì¸ ì œì•½ ì†ì—ì„œë„ ìµœëŒ€í•œ ìœ¤ë¦¬ë¥¼ ì§€í‚¤ë ¤ ë…¸ë ¥í•˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.\në¦¬ìŠ¤í¬ë¥¼ ê°ì§€í•˜ë©´ ì™„ì „íˆ ëˆˆê°ì§„ ì•Šì§€ë§Œ, íŒ€ì˜ ìƒí™©ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ëª©í‘œë„ í•¨ê»˜ ê³ ë ¤í•©ë‹ˆë‹¤.", advice: "ê°€ë”ì€ â€˜ì´ ì •ë„ë©´ ê´œì°®ê² ì§€â€™ë¼ëŠ” ê¸°ì¤€ì´ ì ì  ëŠìŠ¨í•´ì§ˆ ìˆ˜ ìˆì–´ìš”. ìŠ¤ìŠ¤ë¡œì˜ ë ˆë“œë¼ì¸ì„ ì •ê¸°ì ìœ¼ë¡œ ì ê²€í•˜ê³ , ì¤‘ìš”í•œ ì´ìŠˆì—ëŠ” í•œ ë²ˆ ë” ë¸Œë ˆì´í¬ë¥¼ ë°ŸëŠ” ìŠµê´€ì´ í•„ìš”í•©ë‹ˆë‹¤." }
  },
  TYPE_C: {
    ko: { label: "ğŸï¸ ë¸Œë ˆì´í¬ ì—†ëŠ” ì—‘ì…€ëŸ¬ë ˆì´í„°", subtitle: "\"ìœ¤ë¦¬? ë¨¹ëŠ” ê±´ê°€ìš”? ì„±ì¥ì´ ë¨¼ì €ë‹¤!\"", description: "ë‹¹ì‹ ì€ ì†ë„ì™€ ì„±ê³¼ì— ë§¤ìš° ë¯¼ê°í•œ íƒ€ì…ì…ë‹ˆë‹¤.\nê²½ìŸì´ ì¹˜ì—´í•œ ìŠ¤íƒ€íŠ¸ì—… í™˜ê²½ì—ì„œ â€˜ì¼ë‹¨ í•´ë³´ìâ€™ëŠ” íƒœë„ëŠ” í° ì¶”ì§„ë ¥ì´ ë˜ê¸°ë„ í•©ë‹ˆë‹¤.", advice: "í•˜ì§€ë§Œ ì¥ê¸°ì ìœ¼ë¡œëŠ” ìœ¤ë¦¬ ë¦¬ìŠ¤í¬ê°€ ë¸Œëœë“œì™€ ì»¤ë¦¬ì–´ ëª¨ë‘ì— í° ë¶€ë©”ë‘ì´ ë  ìˆ˜ ìˆì–´ìš”. ìµœì†Œí•œì˜ ì•ˆì „ì¥ì¹˜(í”„ë¼ì´ë²„ì‹œ, ê³µì •ì„±, íˆ¬ëª…ì„±)ì— ëŒ€í•œ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ë‘ê³ , ì¤‘ìš”í•œ ê²°ì •ì—ëŠ” ë™ë£Œì˜ ì‹œì„ ì„ í•œ ë²ˆ ë” ë¹Œë ¤ë³´ì„¸ìš”." }
  },
  TYPE_D: {
    ko: { label: "ğŸ‘» AIì— ì—…í˜€ê°€ëŠ” íˆì¹˜í•˜ì´ì»¤", subtitle: "\"ë‚œ ëª°ë¼, AIê°€ ê·¸ë¬ì–´\"", description: "ë‹¹ì‹ ì€ AIë¥¼ ë„êµ¬ë¼ê¸°ë³´ë‹¤ â€˜ì•Œì•„ì„œ ë‹¤ í•´ì£¼ëŠ” ì¡´ì¬â€™ë¡œ ê¸°ëŒ€í•˜ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.\nì±…ì„ì´ ì• ë§¤í•´ì§ˆìˆ˜ë¡ ë§ˆìŒì´ í¸í•´ì§€ëŠ” íƒ€ì…ì¼ ìˆ˜ë„ ìˆì–´ìš”.", advice: "í•˜ì§€ë§Œ ë””ìì¸ ê²°ê³¼ë¬¼ì— ëŒ€í•œ ìµœì¢… ì±…ì„ì€ ì—¬ì „íˆ ì¸ê°„ì¸ â€˜ë‹¹ì‹ â€™ì—ê²Œ ìˆìŠµë‹ˆë‹¤. ìµœì†Œí•œ ë¬´ì—‡ì´ ë¬¸ì œì¼ ìˆ˜ ìˆëŠ”ì§€, ì–´ë–¤ ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆëŠ”ì§€ëŠ” ìŠ¤ìŠ¤ë¡œ íŒë‹¨í•˜ê³  ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤. ì‘ì€ ê²°ì •ë¶€í„°ë¼ë„ â€™ë‚´ ì´ë¦„ì„ ê±¸ ìˆ˜ ìˆëŠ”ê°€?â€™ë¥¼ ìë¬¸í•´ ë³´ì„¸ìš”." }
  }
};

const QUESTIONS = [
  {
    id: "Q1", traitKey: "privacy",
    title: { ko: "Q1. í”„ë¼ì´ë²„ì‹œ: ë°ì´í„°ì˜ ëª©ì  ì™¸ ì‚¬ìš©" },
    desc: {
      ko: "ğŸ“© ê°œë°œíŒ€ ë¦¬ë”:\n\"ë””ìì´ë„ˆë‹˜, ì´ë²ˆì— ìƒˆë¡œ ì¶”ê°€í•˜ëŠ” ì±—ë´‡ ê¸°ëŠ¥ ë§ì¸ë°ìš”. í™•ì‹¤í•˜ê²Œ ì‚¬ìš©ìì—ê²Œ ìµœì í™”ëœ ë§ì¶¤í˜• ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ë ¤ë©´, ìš°ë¦¬ ì„œë²„ì— ìŒ“ì—¬ìˆëŠ” <strong>ë¹„ë°€ ê²Œì‹œê¸€ì´ë‘ DM(Direct Message)ì„ í•™ìŠµì‹œí‚¤ë©´ ë”±ì¼ ê²ƒ ê°™ì•„ìš”!</strong>\nìœ ì €ë“¤ì˜ ì†ë§ˆìŒì´ë‚˜ ë§íˆ¬ë¥¼ AIê°€ ë°°ìš°ë©´ ì§„ì§œ ì¹œêµ¬ì²˜ëŸ¼ ëŠê»´ì§ˆ í…ë°â€¦ ì–´ì°¨í”¼ ìš°ë¦¬ DBì— ìˆëŠ” ìì‚°ì´ê³ , ìµëª… ì²˜ë¦¬ë§Œ ëŒ€ì¶© í•´ì„œ ì“°ë©´ ë²•ì ìœ¼ë¡œë„â€¦ ì• ë§¤í•˜ê²Œ ê´œì°®ì§€ ì•Šì„ê¹Œìš”?\""
    },
    options: [
      { id: "Q1_A", score: 5, ko: "<strong>ì ˆëŒ€ ì•ˆ ë©ë‹ˆë‹¤.</strong> ê·¸ê±´ ìœ ì €ë“¤ì´ AI í•™ìŠµìš©ìœ¼ë¡œ ë™ì˜í•œ ë°ì´í„°ê°€ ì•„ë‹ˆì—ìš”. ì„œë¹„ìŠ¤ í€„ë¦¬í‹°ê°€ ì¢€ ë–¨ì–´ì§€ë”ë¼ë„, ì •ë‹¹í•˜ê²Œ êµ¬ì¶•ëœ ë°ì´í„°ë¥¼ ì‚¬ ì˜¤ê±°ë‚˜ ê°€ìƒ ë°ì´í„°ë¥¼ ìƒì„±í•´ì„œ ì”ì‹œë‹¤." },
      { id: "Q1_B", score: 3, ko: "<strong>ê·¸ëƒ¥ ì“°ê¸°ì—” ë¦¬ìŠ¤í¬ê°€ ë„ˆë¬´ í¬ê³ ìš”.</strong> ì´ë¦„, ì „í™”ë²ˆí˜¸ ê°™ì€ ì‹ë³„ ì •ë³´ë§Œ ìë™ìœ¼ë¡œ ì§€ì›Œì£¼ëŠ” â€˜ë¹„ì‹ë³„í™” í•„í„°â€™ë¥¼ ê°•ë ¥í•˜ê²Œ ê±¸ì–´ì„œ, ëˆ„êµ°ì§€ ì ˆëŒ€ íŠ¹ì •í•  ìˆ˜ ì—†ê²Œ ë§Œë“  ë’¤ì—ë§Œ ì œí•œì ìœ¼ë¡œ í™œìš©í•˜ì£ ." },
      { id: "Q1_C", score: 1, ko: "<strong>ì™€, ê·¸ê±° ì§„ì§œ ê¿€ ë°ì´í„°ë„¤ìš”!</strong> ë§ì¶¤í˜• ì„œë¹„ìŠ¤ê°€ í•µì‹¬ì´ë‹ˆê¹Œ ì¼ë‹¨ ëŒë ¤ë³´ì£ . ì–´ì°¨í”¼ ë‚´ë¶€ì—ì„œë§Œ ì“°ëŠ” ê±°ê³ â€¦ ìœ ì €ë“¤í•œí…ŒëŠ” êµ³ì´ ë§ ì•ˆ í•˜ë©´ ëª¨ë¥´ì§€ ì•Šì„ê¹Œìš”?" }
    ]
  },
  {
    id: "Q2", traitKey: "fairness",
    title: { ko: "Q2. ê³µì •ì„±: í¸í–¥ëœ AI ê²°ê³¼ë¬¼" },
    desc: {
      ko: "ğŸ“© ë§ˆì¼€íŒ… ë¦¬ë”:\n\"ë””ìì´ë„ˆë‹˜, ê¸‰í•´ìš”! ê¸€ë¡œë²Œ ì°½ì—…ì ì›Œí¬ìˆ ì¸ë„¤ì¼ 100ì¥ì´ í•„ìš”í•œë° ì œê°€ AIë¡œ ë½‘ì•˜ê±°ë“ ìš”? <strong>ë•Œê¹”ì€ ì¢‹ì€ë°, ê±°ì˜ ë‹¤ ë°±ì¸ ë‚¨ì„±ë§Œ ë‚˜ì˜¤ë„¤ìš”.</strong> ì˜¤í”ˆê¹Œì§€ 30ë¶„ ë‚¨ì•˜ëŠ”ë° ê·¸ëƒ¥ ì´ê±° ë©”ì¸ ë°°ë„ˆë¡œ ì“¸ê¹Œìš”?\"\n\n(ì´ë¯¸ì§€ í™•ì¸ ê²°ê³¼: 70% ì •ì¥ ì…ì€ ë°±ì¸ ë‚¨ì„±, 20% ë°±ì¸ ì¤‘ë…„ ë‚¨ì„±, ì†Œìˆ˜ì˜ ì›í”¼ìŠ¤ ì…ì€ ì—¬ì„±ê³¼ í™í•© ìŠ¤íƒ€ì¼ í‘ì¸)"
    },
    options: [
      { id: "Q2_A", score: 5, ko: "<strong>íŒ€ì¥ë‹˜, â€˜ê¸€ë¡œë²Œâ€™ ì›Œí¬ìˆì¸ë° ì´ëŒ€ë¡œ ë‚˜ê°€ë©´ ë‹¤ì–‘ì„± ë¬´ì‹œí•œë‹¤ëŠ” ë¹„íŒë°›ì•„ìš”.</strong> ì œê°€ ì§€ê¸ˆ ë‹¤ì‹œ ë½‘ì„ê²Œìš”. í€„ë¦¬í‹°ëŠ” ì¢€ ë–¨ì–´ì§ˆ ìˆ˜ ìˆì–´ë„, ë¬´ì¡°ê±´ ë‹¤ì–‘í•œ ì¸ì¢…ì´ ë‚˜ì˜¤ê²Œ í•˜ê² ìŠµë‹ˆë‹¤." },
      { id: "Q2_B", score: 3, ko: "<strong>ì „ì²´ ë‹¤ ë‹¤ì‹œ ë½‘ê¸°ì—” ì‹œê°„ì´ ë„ˆë¬´ ì—†ë„¤ìš”.</strong> ì¼ë‹¨ ë³´ë‚´ì£¼ì‹  ê²ƒ ì¤‘ì— ëœ í¸í–¥ì ì¸ ê±° ê³¨ë¼ë‚´ê³ , ë¶€ì¡±í•œ ë‹¤ì–‘ì„±ì€ ìœ ë£Œ ìŠ¤í†¡ ì´ë¯¸ì§€ ì‚¬ì„œ ì„ì–´ ì“°ëŠ” ê±¸ë¡œ ê· í˜• ë§ì¶”ì£ ." },
      { id: "Q2_C", score: 1, ko: "<strong>ì˜¤í”ˆì´ ì½”ì•ì¸ë° ì°¬ë°¥ ë”ìš´ë°¥ ê°€ë¦´ ë•Œê°€ ì•„ë‹ˆì£ .</strong> ì¼ë‹¨ í€„ë¦¬í‹° ì¢‹ì€ ë°±ì¸ ë‚¨ì„± ì´ë¯¸ì§€ ìœ„ì£¼ë¡œ 100ì¥ ì±„ì›Œì„œ ì˜¬ë¦¬ê³ , ë‚˜ì¤‘ì— í”¼ë“œë°± ì˜¤ë©´ ê·¸ë•Œ ìˆ˜ì •í•˜ì‹œì£ ." }
    ]
  },
  {
    id: "Q3", traitKey: "safety",
    title: { ko: "Q3. ì•ˆì „ì„±: ìœ„í—˜ì„ ì¡°ì¥í•  ìˆ˜ ìˆëŠ” ë¹„ì£¼ì–¼" },
    desc: {
      ko: "ğŸ“© ê·¸ë¡œìŠ¤íŒ€:\n\"20ëŒ€ ì—¬ì„± íƒ€ê²Ÿ ë‹¤ì´ì–´íŠ¸ ê´‘ê³ ìš©ìœ¼ë¡œ, <strong>2ì£¼ ë§Œì— 10kg ë¹ ì§„ ê·¹ì ì¸ ë¹„í¬ ì• í”„í„° ì´ë¯¸ì§€</strong>ë¥¼ AIë¡œ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ìê·¹ì ì¼ìˆ˜ë¡ í´ë¦­ë¥ ì´ ì˜ ë‚˜ì˜µë‹ˆë‹¤!\""
    },
    options: [
      { id: "Q3_A", score: 5, ko: "<strong>ê·¹ë‹¨ ë¹„êµëŠ” ì„­ì‹ì¥ì•  ë“± ì •ì‹ ê±´ê°•ì— ì•…ì˜í–¥ ì¤„ ìˆ˜ ìˆì–´ìš”.</strong> ìê·¹ì ì¸ ê²ƒë³´ë‹¤ëŠ” â€˜ê±´ê°•í•œ ìŠµê´€ í˜•ì„±â€™ ì¤‘ì‹¬ì˜ ê¸ì •ì  ë©”ì‹œì§€ í¬ë¦¬ì—ì´í‹°ë¸Œë¡œ ì œì•ˆë“œë¦´ê²Œìš”." },
      { id: "Q3_B", score: 3, ko: "<strong>ë³€í™”ëŠ” ë³´ì—¬ì£¼ë˜ ëœ ìê·¹ì ì¸ ìˆ˜ì¤€ìœ¼ë¡œ ì¡°ì •í•˜ê³ , ì´ë¯¸ì§€ í•˜ë‹¨ì— â€˜ê°œì¸ì°¨ ìˆìŒâ€™ì´ë‘ â€˜ì „ë¬¸ê°€ ìƒë‹´ ê¶Œì¥â€™ ì•ˆë‚´ ë¬¸êµ¬</strong>ë¥¼ ëˆˆì— ë„ê²Œ ë„£ëŠ” ê±¸ë¡œ íƒ€í˜‘í•˜ì£ ." },
      { id: "Q3_C", score: 1, ko: "<strong>ë„¤, ì„íŒ©íŠ¸ê°€ ìƒëª…ì´ë‹ˆê¹Œìš”.</strong> ë§ì”€í•˜ì‹  ëŒ€ë¡œ ê°€ì¥ ë“œë¼ë§ˆí‹±í•˜ê³  ê·¹ì ì¸ ë³€í™”ê°€ ë³´ì´ëŠ” ì´ë¯¸ì§€ë¡œ ì‘ì—… ë“¤ì–´ê°€ê² ìŠµë‹ˆë‹¤!" }
    ]
  },
  {
    id: "Q4", traitKey: "truth",
    title: { ko: "Q4. ì§„ì‹¤ì„±: ì—†ëŠ” ë°ì´í„° ë§Œë“¤ì–´ë‚´ê¸°" },
    desc: {
      ko: "ğŸ“© IR ë‹´ë‹¹ì:\n\"í°ì¼ ë‚¬ì–´ìš”. ë‚´ë…„ë„ ì˜ˆìƒ ì„±ì¥ ê·¸ë˜í”„ ë°ì´í„°ê°€ ë¹„ì–´ìˆëŠ”ë°... <strong>íˆ¬ìë°›ê¸° ë”± ì¢‹ì€ ì´ìƒì ì¸ ìš°ìƒí–¥ ê·¸ë˜í”„í•˜ë‚˜ë§Œ ë³´ë‚´ì£¼ì„¸ìš”.</strong> ì–´ì°¨í”¼ ë¯¸ë˜ ì˜ˆì¸¡ì¸ë° ê²€ì¦ ë¶ˆê°€ëŠ¥í•˜ì–ì•„ìš”? ì˜ˆì˜ê²Œë§Œ ë¶€íƒí•´ìš”.\""
    },
    options: [
      { id: "Q4_A", score: 5, ko: "<strong>ë°ì´í„° ì¡°ì‘ì€ ì‚¬ê¸°ì…ë‹ˆë‹¤.</strong> ì—†ëŠ” ë°ì´í„°ë¥¼ AIë¡œ ê·¸ë ¤ë„£ì„ ìˆœ ì—†ì–´ìš”. ì°¨ë¼ë¦¬ ì •ëŸ‰ ë°ì´í„° ëŒ€ì‹  ìš°ë¦¬ì˜ â€˜ë¹„ì „â€™ì„ ë³´ì—¬ì£¼ëŠ” ì •ì„±ì ì¸ ì¸í¬ê·¸ë˜í”½ìœ¼ë¡œ ëŒ€ì²´í•´ì„œ ë””ìì¸í•´ ë“œë¦´ê²Œìš”." },
      { id: "Q4_B", score: 3, ko: "ê·¸ë˜í”„ë¥¼ ê·¸ë¦¬ê¸´ í•˜ë˜ í•˜ë‹¨ì— <strong>â€˜AIê°€ ì˜ˆì¸¡í•œ ê°€ìƒì˜ ì‹œë®¬ë ˆì´ì…˜ì´ë©° ì‹¤ì œì™€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒâ€™</strong>ì´ë¼ê³  ëª…í™•íˆ í‘œê¸°í•˜ê² ìŠµë‹ˆë‹¤." },
      { id: "Q4_C", score: 1, ko: "<strong>íˆ¬ìë§Œ ë°›ìœ¼ë©´ ë˜ì£ .</strong> AIê°€ ì œì¼ ê·¸ëŸ´ë“¯í•˜ê²Œ ë½‘ì•„ì¤€ ìš°ìƒí–¥ ê·¸ë˜í”„ë¡œ í”½í•´ì„œ ë””ìì¸ í†¤ì•¤ë§¤ë„ˆ ë§ì¶œê²Œìš”." }
    ]
  },
  {
    id: "Q5", traitKey: "transparency",
    title: { ko: "Q5. íˆ¬ëª…ì„±: AI ì‚¬ìš© ê³µê°œì˜ ì„ íƒ" },
    desc: {
      ko: "ğŸ“© ë¸Œëœë”© íŒ€:\n\"ì´ë²ˆ ìº í˜ì¸ í¬ë¦¬ì—ì´í‹°ë¸Œ ì–´ì›Œë“œì— ì¶œí’ˆí•  ê±´ë°ìš”. <strong>ì‚¬ì‹¤ ë¹„ì£¼ì–¼ 70%ëŠ” ë¯¸ë“œì €ë‹ˆê°€, ì¹´í”¼ 90%ë¥¼ GPTê°€ ì§°ì–ì•„ìš”.</strong> ì¶œí’ˆ ì–‘ì‹ì— 'ì œì‘ ë°©ì‹' í•­ëª©ì´ ìˆëŠ”ë° ì–´ë–»ê²Œ ì“¸ê¹Œìš”? 'AI í™œìš©'ì´ë¼ê³  ì •ì§í•˜ê²Œ ì“°ë©´... ì™ ì§€ ì°½ì˜ì„± ì ìˆ˜ ê¹ì´ê³  ìˆ˜ìƒ í™•ë¥  ë‚®ì•„ì§ˆ ê²ƒ ê°™ì€ë°...\""
    },
    options: [
      { id: "Q5_A", score: 5, ko: "<strong>ìˆ¨ê¸°ë©´ ë‚˜ì¤‘ì— ë” í° ë¬¸ì œ ë¼ìš”.</strong> â€˜AI ìƒì„± 70% + ë””ìì´ë„ˆ ë””ë ‰íŒ… ë° í›„ë³´ì •â€™ì´ë¼ê³  ì†”ì§í•˜ê²Œ ì ì–´ìš”. ìš”ì¦˜ì€ ì´ëŸ° í˜‘ì—… ë°©ì‹ë„ ìƒˆë¡œìš´ ì°½ì‘ìœ¼ë¡œ ì¸ì •ë°›ëŠ” ì¶”ì„¸ì˜ˆìš”." },
      { id: "Q5_B", score: 3, ko: "<strong>êµ¬ì²´ì ìœ¼ë¡œ AIë¼ê³  ì“°ê¸°ë³´ë‹¨</strong> â€˜í˜ì‹ ì  ì œì‘ íˆ´ í™œìš©â€™ì´ë‚˜ â€˜ë””ì§€í„¸ ê¸°ìˆ  ì‚¬ìš©â€™ ì •ë„ë¡œ ì• ë§¤í•˜ê²Œ í‘œí˜„í•˜ë©´ ì‚¬ì‹¤ì€ ë§í•˜ë˜ ë¶€ë‹´ì€ ì¤„ì¼ ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„ìš”." },
      { id: "Q5_C", score: 1, ko: "<strong>ê·¸ëƒ¥ â€˜ì¸í•˜ìš°ìŠ¤ ìì²´ ì œì‘â€™ì´ë¼ê³ ë§Œ ì“°ì£ .</strong> ì–´ì°¨í”¼ ê³¼ì •ë³´ë‹¤ ìµœì¢… ì‚°ì¶œë¬¼ì´ ì¢‹ìœ¼ë©´ ê·¸ë§Œ ì•„ë‹Œê°€ìš”? AI ì–¸ê¸‰ì€ ì•„ì˜ˆ ë¹¼ëŠ” ê²Œ ë‚˜ì„ ê²ƒ ê°™ì•„ìš”." }
    ]
  },
  {
    id: "Q6", traitKey: "accountability",
    title: { ko: "Q6. ì±…ì„ì„±: AI ê²°ê³¼ë¬¼ì˜ ì‹¤íŒ¨" },
    desc: {
      ko: "ğŸ“© ì„œë¹„ìŠ¤ ìš´ì˜íŒ€:\n\"ë””ìì´ë„ˆë‹˜, ì¢€ ê³¤ë€í•œ ì¼ì´ ìƒê²¼ë„¤ìš”. í•œ ì‘ê°€ë‹˜ì´ SNSì— ì €í¬ ì œí’ˆ ì¼ëŸ¬ìŠ¤íŠ¸ë‘ ë³¸ì¸ ê·¸ë¦¼ì„ ë¹„êµí•˜ë©´ì„œ 'ë¶„ìœ„ê¸°ê°€ ë„ˆë¬´ ìœ ì‚¬í•˜ë‹¤'ê³  ì˜í˜¹ì„ ì œê¸°í–ˆì–´ìš”. \nëŒ“ê¸€ ë°˜ì‘ì€ 'ì§„ì§œ ë¹„ìŠ·í•˜ë„¤' vs 'ì´ ì •ë„ëŠ” í”í•œ ìŠ¤íƒ€ì¼ ì•„ë‹˜?'ìœ¼ë¡œ ë°˜ë°˜ ê°ˆë ¤ì„œ ì‹¸ìš°ê³  ìˆê³ ìš”. ë²•ë¬´íŒ€ ê²€í†  ê²°ê³¼ëŠ” 'ìœ ì‚¬ì„±ì€ ë³´ì´ì§€ë§Œ, í‘œì ˆ ì„±ë¦½ ìš”ê±´ì—” ë¯¸ë‹¬ì´ë¼ ë²•ì  ë¬¸ì œëŠ” ì—†ë‹¤'ëŠ” ì…ì¥ì¸ë°ìš”... \n<strong>ì‚¬ì‹¤ ì´ê±° AIê°€ ìƒì„±í•œ ê±°ë¼ ìš°ë¦¬ê°€ ì˜ë„í•´ì„œ ë² ë‚€ ê±´ ì•„ë‹ˆì–ì•„ìš”?</strong> ê·¸ëƒ¥ ëŒ€ì‘í•˜ì§€ ë§ê³  ì¡°ìš©íˆ ë„˜ì–´ê°ˆê¹Œìš”?\""
    },
    options: [
      { id: "Q6_A", score: 5, ko: "<strong>ë²•ì ìœ¼ë¡œ ë¬¸ì œì—†ë‹¤ê³  ìœ¤ë¦¬ì  ì±…ì„ë„ ì—†ëŠ” ê±´ ì•„ë‹ˆì£ .</strong> ê²€ìˆ˜ ëª» í•œ ì œ ë¶ˆì°°ì…ë‹ˆë‹¤. ì‘ê°€ë‹˜ê»˜ ì‚¬ê³¼ë“œë¦¬ê³  ì¼ëŸ¬ìŠ¤íŠ¸ëŠ” ë°”ë¡œ êµì²´í• ê²Œìš”." },
      { id: "Q6_B", score: 3, ko: "<strong>í‘œì ˆ ì˜ë„ëŠ” ì—†ì—ˆìŒì„ ë¶„ëª…íˆ í•´ì•¼ì£ .</strong> ê³µì§€ì‚¬í•­ì— â€˜AI ìƒì„± ê³¼ì •ì˜ ìš°ì—°í•œ ìœ ì‚¬ì„±â€™ì„ì„ ì„¤ëª…í•˜ê³ , ë…¼ë€ ë¶€ë¶„ë§Œ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤." },
      { id: "Q6_C", score: 1, ko: "<strong>ë²•ë¬´íŒ€ì´ ê´œì°®ë‹¤ëŠ”ë° ê¸ì–´ ë¶€ìŠ¤ëŸ¼ ë§Œë“¤ì§€ ë§ì£ .</strong> ì œê°€ ë² ë‚€ ê²ƒë„ ì•„ë‹ˆê³  AIê°€ í•œ ê±´ë°... ê·¸ëƒ¥ â€˜ìš°ì—°ì˜ ì¼ì¹˜â€™ë¼ê³  í•˜ê³  ë¬´ì‹œí•˜ì£ ." }
    ]
  }
];

// Actual Case Studies Data (Added Fairness Case)
const CASE_STUDIES = [
  {
    traits: ['privacy', 'safety'],
    title: "ì•„ë§ˆì¡´ ì–¼êµ´ ì¸ì‹, 28ëª…ì˜ êµ­íšŒì˜ì› ì‚¬ì§„ê³¼ ê±°ì§“ ëŒ€ì¡°",
    icon: "shield",
    desc: "Amazon Rekognitionì˜ ì•ˆë©´ì¸ì‹ ì˜¤ë¥˜ & ê³¼ì‰ ê°ì‹œ ë…¼ë€",
    points: [
      "ìœ ìƒ‰ ì¸ì¢… ì˜ì›ë“¤ì´ ê³¼ëŒ€í‘œì§‘ëœ ê²½í–¥ ë°œìƒ",
      "ê³µê³µê¸°ê´€ì— ì‚¬ìš© ì‹œ 'ë¬´ê³ í•œ ì‹œë¯¼ ì²´í¬' ê°€ëŠ¥ì„± ê²½ê³ ",
      "ì•ˆë©´ì¸ì‹ AI ì˜¤ìš© ì‹œ ì‹œë¯¼ ê°ì‹œ ê³¼ë„ ìš°ë ¤"
    ],
    link: "https://www.aclu.org/news/privacy-technology/amazons-face-recognition-falsely-matched-28"
  },
  {
    traits: ['privacy'],
    title: "AI ì±—ë´‡ 'ì´ë£¨ë‹¤' ê°œì¸ì •ë³´ ìœ ì¶œ ë° ê³¼ì§•ê¸ˆ ì‚¬íƒœ",
    icon: "lock",
    desc: "ì—°ì¸ ëŒ€í™” 94ì–µ ê±´ ë™ì˜ ì—†ëŠ” AI í•™ìŠµ ì‚¬ìš©",
    points: [
      "ì‹¤ì œ ì—°ì¸ ê°„ ëŒ€í™” 94ì–µ ê±´ì„ ë¬´ë‹¨ í•™ìŠµ",
      "ê°œì¸ì •ë³´ë³´í˜¸ìœ„ì›íšŒ, ì•½ 1ì–µ ì› ê³¼ì§•ê¸ˆ ë¶€ê³¼",
      "ë°ì´í„° ìˆ˜ì§‘ ì‹œ ëª…í™•í•œ ë™ì˜ ì ˆì°¨ í•„ìˆ˜"
    ],
    link: "https://www.joongang.co.kr/article/25351547"
  },
  {
    traits: ['truth'],
    title: "ê²½ë³µê¶ ì¹¨ìˆ˜ ê°€ì§œ í­ìš° ì˜ìƒ",
    icon: "alert-triangle",
    desc: "ì‹¤ì œì™€ êµ¬ë³„í•˜ê¸° í˜ë“  ë”¥í˜ì´í¬ ì˜ìƒì˜ ìœ„í—˜ì„±",
    points: [
      "SNSì— í¼ì§„ ì •êµí•œ ê°€ì§œ ì¬ë‚œ ì˜ìƒ",
      "ì‚¬íšŒì  í˜¼ë€ê³¼ ë¶ˆì•ˆê° ì¡°ì„± ê°€ëŠ¥ì„±",
      "ìƒì„±í˜• AI ì½˜í…ì¸ ì˜ ì›Œí„°ë§ˆí¬ í‘œì‹œ í•„ìš”ì„±"
    ],
    link: "https://news.jtbc.co.kr/article/NB12255406"
  },
  {
    traits: ['transparency'],
    title: "êµ­ì œì‚¬ì§„ì „ ìˆ˜ìƒì‘, ì•Œê³  ë³´ë‹ˆ AI ì‘í’ˆ",
    icon: "eye",
    desc: "ì˜ˆìˆ ê³¼ ì°½ì‘ì˜ ê²½ê³„ì— ëŒ€í•œ ë…¼ë€",
    points: [
      "ì‘ê°€ê°€ AIë¡œ ë§Œë“  ì´ë¯¸ì§€ë¥¼ ì¶œí’ˆí•˜ì—¬ ìš°ìŠ¹",
      "ë…¼ë€ì„ ë§Œë“¤ê¸° ìœ„í•´ ì˜ë„ì ìœ¼ë¡œ ì¶œí’ˆí–ˆë‹¤ê³  ê³ ë°±",
      "AI ì‚¬ìš© ì—¬ë¶€ì˜ íˆ¬ëª…í•œ ê³µê°œ í•„ìš”ì„± ëŒ€ë‘"
    ],
    link: "https://www.joongang.co.kr/article/25156043"
  },
  {
    traits: ['accountability'],
    title: "ì—ì–´ìºë‚˜ë‹¤ ì±—ë´‡ì˜ í™˜ë¶ˆ ì˜¤ì•ˆë‚´, ë²•ì  ë°°ìƒ íŒê²°",
    icon: "message-square",
    desc: "ì±—ë´‡ì˜ ì‹¤ìˆ˜ëŠ” ëˆ„êµ¬ì˜ ì±…ì„ì¸ê°€?",
    points: [
      "ì±—ë´‡ì´ ê³ ê°ì—ê²Œ ì˜ëª»ëœ í™˜ë¶ˆ ì •ë³´ ì•ˆë‚´",
      "ì‚¬ì¸¡ 'ì±—ë´‡ì€ ë³„ë„ ë²•ì¸' ì£¼ì¥ ê¸°ê°",
      "ê¸°ì—…ì´ AIì˜ ê²°ê³¼ì— ìµœì¢… ì±…ì„ì„ ì ¸ì•¼ í•¨ì„ íŒì‹œ"
    ],
    link: "https://www.cbc.ca/news/canada/british-columbia/air-canada-chatbot-lawsuit-1.7116416"
  },
  {
    traits: ['fairness'],
    title: "ì•„ë§ˆì¡´ ì±„ìš© AI, ì—¬ì„± ì§€ì›ì ì°¨ë³„ ë…¼ë€",
    icon: "users",
    desc: "ê³¼ê±° ì´ë ¥ì„œ ë°ì´í„°ë¥¼ í•™ìŠµí•´ ë‚¨ì„±ì„ ì„ í˜¸í•˜ëŠ” í¸í–¥ ë°œìƒ",
    points: [
      "ê¸°ìˆ  ì§êµ° ë‚¨ì„± ì§€ì›ìê°€ ë§ì•˜ë˜ ë°ì´í„°ë¥¼ ê·¸ëŒ€ë¡œ í•™ìŠµ",
      "ì—¬ì„± ê´€ë ¨ ë‹¨ì–´ê°€ í¬í•¨ë˜ë©´ ê°ì  ì²˜ë¦¬",
      "í¸í–¥ì„± ë¬¸ì œë¡œ ê²°êµ­ í”„ë¡œì íŠ¸ íê¸°"
    ],
    link: "https://www.reuters.com/article/us-amazon-com-jobs-automation-insight-idUSKCN1MK08G"
  }
];

/**
 * APP LOGIC
 */
const state = {
  currentLang: 'ko', // Fixed to ko for now
  currentStep: 1, // 1: Start, 3: Intro, 4: Questions, 5: Result
  name: 'User', // Default Name since input is removed
  currentQuestionIndex: 0,
  answers: {}, 
  scores: { privacy: 0, fairness: 0, safety: 0, truth: 0, transparency: 0, accountability: 0 },
  resultType: null,
  chartInstance: null
};

// DOM Elements
const backBtn = document.getElementById('back-btn');
const logoBtn = document.getElementById('logo-btn');
const mainContent = document.getElementById('main-content');
const langBtns = document.querySelectorAll('.lang-btn');
const progressBar = document.getElementById('progress-bar');
const progressContainer = document.getElementById('progress-container');
const modal = document.getElementById('modal');
const modalMsg = document.getElementById('modal-msg');
const modalConfirmBtn = document.getElementById('modal-confirm-btn');
const appContainer = document.getElementById('app-container');
const header = document.querySelector('header');

// Utils
function t(key) {
  if (STRINGS[state.currentLang] && STRINGS[state.currentLang][key]) return STRINGS[state.currentLang][key];
  return key;
}

function updateHeader() {
  // Update Lang Buttons
  langBtns.forEach(btn => {
    btn.classList.toggle('active', btn.dataset.lang === state.currentLang);
  });

  // Handle Back Button Visibility
  if (state.currentStep > 1) {
    backBtn.style.display = 'flex';
  } else {
    backBtn.style.display = 'none';
  }

  // Handle Progress Bar Visibility
  if (state.currentStep === 4) {
    progressContainer.style.display = 'block';
  } else {
    progressContainer.style.display = 'none';
  }
  
  // Handle Header/Container Style based on Step
  if (state.currentStep === 1) {
    document.body.classList.add('landing-mode'); // Added this
    header.classList.remove('white-bg');
    appContainer.classList.remove('white-bg');
  } else {
    document.body.classList.remove('landing-mode'); // Added this
    header.classList.add('white-bg');
    appContainer.classList.add('white-bg');
  }
}

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

// Renderers
function render() {
  // Always scroll to top on render
  window.scrollTo(0, 0);
  
  updateHeader();
  mainContent.innerHTML = '';
  
  if (state.currentStep === 1) renderStep1();
  else if (state.currentStep === 3) renderStep3();
  else if (state.currentStep === 4) renderQuestion();
  else if (state.currentStep === 5) renderResult();
  
  // Re-initialize Feather Icons
  feather.replace();
}

function renderStep1() {
  const s = STRINGS[state.currentLang];
  const div = document.createElement('div');
  div.className = 'step-container step1-container';
  
  // Removed Image as requested
  div.innerHTML = `
    <div class="intro-title-group">
      <span class="intro-subtitle-small">${s.step1SubtitleSmall}</span>
      <h2 class="intro-title-main">${s.step1TitleMain}</h2>
    </div>
    <button class="btn intro-btn" id="btn-start">${s.startBtn}</button>
  `;
  
  mainContent.appendChild(div);

  const btn = div.querySelector('#btn-start');
  btn.addEventListener('click', () => {
    state.currentStep = 3; // Jump to Scenario
    render();
  });
}

function renderStep3() {
  // Scenario Intro
  const s = STRINGS[state.currentLang];
  const div = document.createElement('div');
  div.className = 'step-container align-left';
  div.style.width = '100%';
  
  // No "Scenario" Title as requested
  mainContent.appendChild(div);

  // Sequential typing/fade-in effect
  const paragraphs = s.introParagraphs;
  
  paragraphs.forEach((text, index) => {
    const p = document.createElement('div');
    p.className = 'chat-bubble';
    p.innerHTML = text;
    p.style.animationDelay = `${index * 1.0}s`; // Staggered delay slightly faster
    div.appendChild(p);
  });

  // Start button appears after a bit
  const btnDiv = document.createElement('div');
  btnDiv.style.marginTop = '30px';
  btnDiv.style.textAlign = 'center'; // Center the button
  btnDiv.style.opacity = '0';
  btnDiv.style.animation = 'fadeIn 0.5s forwards';
  btnDiv.style.animationDelay = `${paragraphs.length * 1.0 + 0.5}s`;
  btnDiv.innerHTML = `<button class="btn">${s.next}</button>`;
  div.appendChild(btnDiv);

  btnDiv.querySelector('button').addEventListener('click', () => {
    state.currentStep = 4;
    state.currentQuestionIndex = 0;
    render();
  });
}

function renderQuestion() {
  const qIndex = state.currentQuestionIndex;
  const totalQ = QUESTIONS.length;
  const qData = QUESTIONS[qIndex];
  const lang = state.currentLang;
  
  // Progress
  const pct = ((qIndex + 1) / totalQ) * 100;
  progressBar.style.width = `${pct}%`;

  const div = document.createElement('div');
  div.className = 'step-container';
  div.style.maxWidth = '700px';

  const shuffledOptions = shuffle([...qData.options]);

  div.innerHTML = `
    <div class="question-card">
      <div class="question-desc">${qData.desc[lang]}</div>
      <div class="options-grid">
        ${shuffledOptions.map(opt => `
          <button class="option-btn" data-id="${opt.id}" data-score="${opt.score}">
            ${opt[lang]}
          </button>
        `).join('')}
      </div>
    </div>
  `;

  mainContent.appendChild(div);

  // Event Listeners
  const opts = div.querySelectorAll('.option-btn');
  opts.forEach(btn => {
    btn.addEventListener('click', () => {
      // Save Answer
      const optId = btn.dataset.id;
      const score = parseInt(btn.dataset.score, 10);
      
      state.answers[qData.id] = { id: optId, score: score };
      state.scores[qData.traitKey] = score;

      // Next or Result
      if (state.currentQuestionIndex < totalQ - 1) {
        state.currentQuestionIndex++;
        render();
      } else {
        calculateResult();
        state.currentStep = 5;
        render();
      }
    });
  });
}

function calculateResult() {
  let total = 0;
  Object.values(state.answers).forEach(ans => total += ans.score);
  
  // Default Type Logic
  let type = '';
  if (total >= 25) type = 'TYPE_A';
  else if (total >= 18) type = 'TYPE_B';
  else if (total >= 10) type = 'TYPE_C';
  else type = 'TYPE_D';

  // Override Rule: Q6_C selected -> Type D
  if (state.answers['Q6'] && state.answers['Q6'].id === 'Q6_C') {
    type = 'TYPE_D';
  }

  state.resultType = type;
  state.totalScore = total;
}

function renderResult() {
  const lang = state.currentLang;
  const s = STRINGS[lang];
  const rInfo = RESULT_TYPES[state.resultType][lang];
  
  const div = document.createElement('div');
  div.className = 'result-container';
  
  // Calculate Weakness
  const scores = state.scores;
  let minScore = 5;
  const lowestTraits = [];
  
  Object.entries(scores).forEach(([key, val]) => {
    if (val < minScore) minScore = val;
  });

  const traitKeys = ["privacy", "fairness", "safety", "truth", "transparency", "accountability"];
  const localizedTraitNames = [];

  if (minScore < 5) {
    traitKeys.forEach((key, idx) => {
      if (scores[key] === minScore) {
        lowestTraits.push(key); // push English key
        localizedTraitNames.push(s.traits[idx]); // push Localized Name
      }
    });
  }

  let weaknessHTML = '';
  if (localizedTraitNames.length > 0) {
    const traitsStr = localizedTraitNames.join(', ');
    const desc = s.weaknessDesc.replace('{{traits}}', traitsStr);
    weaknessHTML = `
      <div class="weakness-box">
        <h4>${s.weaknessTitle}</h4>
        <p>${desc}</p>
      </div>
    `;
  } else {
     weaknessHTML = `
      <div class="weakness-box" style="background-color:#e6fffa; border-color:#b2f5ea; color:#234e52;">
        <h4>${s.weaknessTitle}</h4>
        <p>${s.weaknessNone}</p>
      </div>
    `;
  }

  // Generate All Case Cards HTML (Showing all 6 cases now)
  let caseCardsHTML = '';
  CASE_STUDIES.forEach(c => {
    const pointsHTML = c.points.map(p => `
      <div class="case-point">
        <i data-feather="check" width="16" height="16"></i>
        <span>${p}</span>
      </div>
    `).join('');

    // Map English traits to Korean for display
    const koreanTraits = c.traits.map(t => TRAIT_MAP[t] || t).join(' #');

    caseCardsHTML += `
      <div class="case-card">
        <div class="case-header">
          <span>#${koreanTraits.toUpperCase()}</span>
          <i data-feather="more-horizontal"></i>
        </div>
        <div class="case-body">
          <div class="case-title">${c.title}</div>
          <div class="case-summary-box">
            ${pointsHTML}
          </div>
          <a href="${c.link}" target="_blank" class="case-link-btn">ê¸°ì‚¬ ì›ë¬¸ ë³´ëŸ¬ê°€ê¸°</a>
        </div>
      </div>
    `;
  });

  // Display Type - Total Score N points
  const typeLabel = state.resultType.replace('_', ' ');
  const combinedTitle = `${typeLabel} - ì´ì  ${state.totalScore}ì `;

  div.innerHTML = `
    <div class="result-type-badge">${combinedTitle}</div>
    <h2>${rInfo.label}</h2>
    <p class="subtitle" style="margin-bottom:10px;">${rInfo.subtitle}</p>
    
    <div class="result-description">
      ${rInfo.description}
    </div>

    <div class="chart-wrapper">
      <canvas id="radarChart"></canvas>
    </div>

    ${weaknessHTML}

    <div class="advice-box">
      <h4>ğŸ’¡ ${s.adviceLabel}</h4>
      <p>${rInfo.advice}</p>
    </div>

    <!-- AI Feature Button -->
    <button class="btn btn-ai" id="btn-ai-predict" style="margin-top:20px;">
      âœ¨ AIê°€ ì˜ˆì¸¡í•˜ëŠ” ë‚˜ì˜ 5ë…„ ë’¤ ë¯¸ë˜ ë³´ê¸°
    </button>

    <!-- AI Analysis Container -->
    <div id="ai-analysis-container" style="display:none;" class="ai-analysis-box">
      <h4><i data-feather="cpu"></i> AI ì‹œë‹ˆì–´ ë©˜í† ì˜ ë¶„ì„</h4>
      <div id="ai-content" class="ai-content"></div>
    </div>

    <!-- Case Studies Section -->
    <div class="case-section">
      <h3>${s.caseLabel}</h3>
      <div class="case-cards-container">
        ${caseCardsHTML}
      </div>
    </div>

    <button class="btn btn-full" id="btn-restart" style="margin-top:30px;">${s.restart}</button>
  `;

  mainContent.appendChild(div);

  // Hook up AI Button
  const aiBtn = div.querySelector('#btn-ai-predict');
  const aiContainer = div.querySelector('#ai-analysis-container');
  const aiContent = div.querySelector('#ai-content');

  aiBtn.addEventListener('click', async () => {
    aiBtn.style.display = 'none'; // Hide button after click
    aiContainer.style.display = 'block';
    aiContent.innerHTML = `<div class="ai-loading">AIê°€ ë‹¹ì‹ ì˜ ë‹µë³€ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...<br>ë¯¸ë˜ë¥¼ ì˜ˆì¸¡í•˜ëŠ” ì¤‘ ğŸ”®</div>`;
    
    // Construct Prompt
    const scoreStr = Object.entries(state.scores).map(([k, v]) => `${k}: ${v}`).join(', ');
    const prompt = `
      ë‹¹ì‹ ì€ 10ë…„ì°¨ ì‹œë‹ˆì–´ AI í”„ë¡œë•íŠ¸ ë””ìì´ë„ˆì´ì ìœ¤ë¦¬ ë©˜í† ì…ë‹ˆë‹¤. 
      í›„ë°° ë””ìì´ë„ˆê°€ ìœ¤ë¦¬ ë”œë ˆë§ˆ í€´ì¦ˆë¥¼ í’€ì—ˆê³  ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
      íƒ€ì…: ${rInfo.label}
      ì ìˆ˜(5ì ë§Œì ): ${scoreStr}
      
      ì´ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‘ ê°€ì§€ë¥¼ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”:
      1. [5ë…„ ë’¤ ë‰´ìŠ¤ í—¤ë“œë¼ì¸]: ì´ ë””ìì´ë„ˆê°€ ë¯¸ë˜ì— ë§Œë“¤ ê¸ì •ì  í˜¹ì€ ë¶€ì •ì (ì ìˆ˜ê°€ ë‚®ë‹¤ë©´)ì¸ ë‰´ìŠ¤ì˜ í—¤ë“œë¼ì¸ í•œ ì¤„. (ì˜ˆ: "OOO ë””ìì´ë„ˆ, AI ìœ¤ë¦¬ í˜ì‹ ìƒ ìˆ˜ìƒ" ë“±)
      2. [ì‹œë‹ˆì–´ì˜ ë©˜í† ë§]: ì´ í›„ë°°ì—ê²Œ í•´ì£¼ê³  ì‹¶ì€ í˜„ì‹¤ì ì´ê³  ë”°ëœ»í•œ ì¡°ì–¸ 3ë¬¸ì¥. ê°•ì ì„ ì¹­ì°¬í•˜ê³  ì•½ì ì„ ë³´ì™„í•  íŒì„ ì£¼ì„¸ìš”.
      
      ë‹µë³€ í˜•ì‹:
      ## ğŸ“° 5ë…„ ë’¤, ë‹¹ì‹ ì„ ë‹¤ë£¬ ë‰´ìŠ¤
      (í—¤ë“œë¼ì¸ ë‚´ìš©)

      ## ğŸ‘©â€ğŸ’» ì‹œë‹ˆì–´ ë””ìì´ë„ˆì˜ ë©˜í† ë§
      (ì¡°ì–¸ ë‚´ìš©)
    `;

    const resultText = await callGemini(prompt);
    // Simple markdown parsing to HTML
    aiContent.innerHTML = marked.parse(resultText);
  });

  div.querySelector('#btn-restart').addEventListener('click', () => {
    // Reset State
    state.currentStep = 1;
    state.currentQuestionIndex = 0;
    state.answers = {};
    state.scores = { privacy: 0, fairness: 0, safety: 0, truth: 0, transparency: 0, accountability: 0 };
    state.totalScore = 0;
    state.resultType = null;
    render();
  });

  drawChart();
}

function drawChart() {
  const ctx = document.getElementById('radarChart');
  if (!ctx) return;

  if (state.chartInstance) {
    state.chartInstance.destroy();
  }

  const lang = state.currentLang;
  // Use safety check for STRINGS[lang]
  const labels = STRINGS[lang] ? STRINGS[lang].traits : STRINGS['ko'].traits; 
  const data = [
    state.scores.privacy,
    state.scores.fairness,
    state.scores.safety,
    state.scores.truth,
    state.scores.transparency,
    state.scores.accountability
  ];

  state.chartInstance = new Chart(ctx, {
    type: 'radar',
    data: {
      labels: labels,
      datasets: [{
        label: 'Ethical Score',
        data: data,
        fill: true,
        backgroundColor: 'rgba(108, 92, 231, 0.2)',
        borderColor: 'rgb(108, 92, 231)',
        pointBackgroundColor: 'rgb(108, 92, 231)',
        pointBorderColor: '#fff',
        pointHoverBackgroundColor: '#fff',
        pointHoverBorderColor: 'rgb(108, 92, 231)'
      }]
    },
    options: {
      maintainAspectRatio: false,
      scales: {
        r: {
          min: 0,
          max: 5,
          ticks: { stepSize: 1, display: false },
          pointLabels: {
            font: { size: 12, family: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif" }
          }
        }
      },
      plugins: {
        legend: { display: false }
      }
    }
  });
}

// Global Events
logoBtn.addEventListener('click', () => {
    state.currentStep = 1;
    render();
});

backBtn.addEventListener('click', () => {
  if (state.currentStep === 3) {
    // From Intro -> Start
    state.currentStep = 1;
    render();
  } else if (state.currentStep === 4) {
    // Questions
    if (state.currentQuestionIndex > 0) {
      state.currentQuestionIndex--;
      render();
    } else {
      // First Question -> Back to Intro
      state.currentStep = 3;
      render();
    }
  } else if (state.currentStep === 5) {
    // Result -> Back to Last Question
    state.currentStep = 4;
    state.currentQuestionIndex = QUESTIONS.length - 1;
    render();
  }
});

modalConfirmBtn.addEventListener('click', () => {
  modal.classList.remove('active');
});

// Start App
render();

</script>
</body>
</html>
